!function(){function n(e){let r="";return Object.entries(e).map(([e,a])=>{r+=`<label class="ast-search--posttype-heading"> ${e}s </label>`,a.map(e=>{a=e.title.rendered;var a=(new DOMParser).parseFromString(a,"text/html").documentElement.textContent,s={sizes:{thumbnail:{source_url:e.placeholder_image}}},t=e._embedded,s=(t["wp:featuredmedia"]?.[0]?.media_details||s).sizes||{},s=t["wp:featuredmedia"]&&astra_search.search_results_images?`<span class="ast-search-res-image-wrap">
					<img
						src="${s.thumbnail?s?.thumbnail.source_url:values(s).reduce((e,a)=>a.width<e.width?a:e,{width:999999999}).source_url||t["wp:featuredmedia"][0].source_url}"
						class="ast-search-result-img"
					/>
				</span>`:"";r+=`<a class="ast-search-item" role="option" target="_blank" href="${e.link}"> ${s} <span> ${a} </span> </a>`})}),r}window.addEventListener("load",function(e){document.querySelectorAll(".search-field").forEach(e=>{e.addEventListener("input",async a=>{var s=e.closest("form.search-form"),a=a.target.value.trim(),t=astra_search.search_post_types;const r=document.querySelectorAll(".ast-live-search-results");r&&r.forEach(function(e){e.parentNode.removeChild(e)});try{var l=`${astra_search.rest_api_url}wp/v2/posts${-1<astra_search.rest_api_url.indexOf("?")?"&":"?"}_embed=1&post_type=ast_queried:${t.join(":")}&per_page=${astra_search.search_posts_per_page}&search=`+a+(astra_search.search_language?"&lang="+astra_search.search_language:""),c=await(await fetch(l)).json();let e="";if(0<c.length){let a={};c.map(e=>{e.type in a?a[e.type].push(e):a[e.type]=[e]});var i=n(a);e=`
							<div
								class="ast-live-search-results"
								role="listbox"
								aria-label="Search results"
								style="top: ${parseInt(s.offsetHeight)+10}px;"
							>
								${i}
							</div>
						`}else e=`
							<div
								class="ast-live-search-results"
								role="listbox"
								aria-label="Search results"
								style="top: ${parseInt(s.offsetHeight)+10}px;"
							>
								<label class="ast-search--no-results-heading"> ${astra_search.no_live_results_found} </label>
							</div>
						`;const r=document.querySelectorAll(".ast-live-search-results");r&&r.forEach(function(e){e.parentNode.removeChild(e)}),s.insertAdjacentHTML("beforeend",e)}catch(e){console.error("Error while fetching data:",e)}})})}),document.addEventListener("click",function(e){var e=e.target.closest("form.search-form");null!==e?e.querySelector(".ast-live-search-results")&&(e.querySelector(".ast-live-search-results").style.display="block"):(e=document.querySelectorAll(".ast-live-search-results"))&&e.forEach(function(e){e.style.display="none"})})}();